# 未功能备选方案计划书

这份文档总结了我们讨论过的几个扩展功能，包括**微信推送**、**微信扫码登录**和**短信验证**。这些方案目前虽未实施，但可以作为未来的升级路径。

---

## 方案一：微信公众号模版消息推送 (WeChat Push)

利用您现有的**微信服务号**，可以给用户发送“每日学习日报”或“复习提醒”。

### 1. 能做到什么程度？(Capabilities)

- **精准触达**：可以直接在用户的微信聊天列表中弹出消息。
- **个性化数据**：可以插入变量，例如：“你今天背了 **50** 个单词，坚持了 **10** 天”。
- **点击跳转**：消息卡片可以配置点击跳转到你的网站（背单词页面）。
- **即时性**：后端接口触发后，用户几秒钟内就能收到。

### 2. 有哪些限制？(Limitations)

- **内容格式严格**：**不能发送任意文本**（如“你好，吃饭了吗”）。必须使用微信官方审核过的**“模板”**。
  - _例子_：`{{first.DATA}} 任务名称：{{keyword1.DATA}} 完成进度：{{keyword2.DATA}} {{remark.DATA}}`
- **频次限制**：虽然接口调用上限很高（通常 10 万次/天），但如果不加节制地骚扰用户，可能会被用户投诉导致封号。通常建议 **1 天 1 次**（如晚报）。
- **用户互动**：用户必须**先关注**公众号，并且在你的网站上进行**“绑定”**操作（通常是扫码）。

### 3. 实施计划

1.  **选模版**：在微信后台挑选一个用于“作业完成通知”或“打卡成功通知”的模版。
2.  **建表**：数据库增加 `wechat_openid` 字段。
3.  **开发绑定**：前端展示带参数二维码 -> 用户扫码 -> 绑定 OpenID 到当前账号。
4.  **开发定时任务**：
    - Cloudflare Worker Cron Trigger (每天 20:00)。
    - 查询今天有学习记录的用户。
    - 调用微信 API 发送模版消息。

---

## 方案二：微信服务号扫码登录 (WeChat Scan Login)

利用服务号的**“带参数二维码”**接口，实现 PC 端免密登录。体验最好，最推荐作为账号/密码的补充。

### 1. 优势

- **无需输入**：手机扫一下即可，不需要记账号密码。
- **自动关注**：用户扫码登录的同时会默认关注公众号，为你积累粉丝。

### 2. 实施计划

1.  **接口开发**：需开发 `生成二维码`、`轮询检查`、`微信回调处理` 三个接口。
2.  **前端改造**：登录弹窗增加“切换到扫码登录”的选项。

---

## 方案三：手机短信验证码登录 (SMS Auth)

传统的手机号+验证码方式。

### 1. 优势

- **符合直觉**：最传统的登录方式，老少皆宜。
- **账号体系稳固**：手机号是很好的唯一标识。

### 2. 成本与限制

- **金钱成本**：每条短信约 0.04 元。
- **资质门槛**：
  - **阿里云**：签名审核非常严格，个人开发者较难申请到通用签名。
  - **腾讯云**：对个人开发者相对友好，提供相关证明（如网站备案截图或实名认证）通常可通过。

### 3. 实施计划

1.  **开通服务**：购买腾讯云短信包（建议），申请签名（如“单词记忆本”）和模版（“您的验证码是{1}...”）。
2.  **后端开发**：接入腾讯云 SDK，生成随机 6 位数，存入 KV 或 D1（带过期时间）。
3.  **验证逻辑**：用户提交验证码 -> 后端比对 -> 通过则登录。

---

## 总结建议 (Roadmap)

如果未来要升级，建议按以下顺序进行：

1.  **阶段一（增加粘性）**：接入 **“微信推送”**。
    - 理由：既然已经有服务号，这是利用率最高的功能，能显著提高用户留存（每天提醒用户回来背单词）。
2.  **阶段二（优化体验）**：接入 **“微信扫码登录”**。
    - 理由：与阶段一技术栈互通（都需要 OpenID），能极大简化 PC 端登录流程。
3.  **阶段三（必要时）**：接入 **“短信登录”**。
    - 理由：只有当用户群体扩大，且很多用户不方便使用微信扫码时才考虑，毕竟有持续的资金成本。
